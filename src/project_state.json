{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Implement admin bootstrapping recovery to resolve unauthorized access (reset firstAdminBootstrapped temporarily, optionally add admin-page buttons, then remove for security).",
  "architectural_notes": [
    "Admin bootstrapping uses a firstAdminBootstrapped flag; if it is true before any admin exists, setMeAsAdmin() will trap. Provide a temporary recovery path (resetBootstrap) and remove it after bootstrapping for security."
  ],
  "known_issues": [
    "Admin bootstrapping deadlock: firstAdminBootstrapped can be true while no admin is assigned, causing setMeAsAdmin() to trap with Unauthorized and blocking access."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-frontend-when-an-authenticated-user-is-shown-the-admin-accessdeniedscreen-logged-in-but-not-admin-add-a-temporary-reset-bootstrap-button-that-calls-the-backend-resetbootstrap-method-shows-success-failure-ui-and-then-allows-the-user-to-click-the-existing-set-me-as-admin-button-to-call-setmeasadmin-immediately-after",
      "title": "Frontend: When an authenticated user is shown the /admin AccessDeniedScreen (logged in but not admin), add a temporary \"Reset Bootstrap\" button that calls the backend `resetBootstrap()` method, shows success/failure UI, and then allows the user to click the existing \"Set Me as Admin\" button to call `setMeAsAdmin()` immediately after.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-frontend-add-a-small-explicit-security-warning-in-the-authenticated-accessdeniedscreen-ui-that-resetbootstrap-is-temporary-and-must-be-removed-disabled-after-an-admin-is-successfully-bootstrapped",
      "title": "Frontend: Add a small, explicit security warning in the authenticated AccessDeniedScreen UI that `resetBootstrap()` is temporary and must be removed/disabled after an admin is successfully bootstrapped.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-docs-update-frontend-production-configuration-md-to-include-explicit-steps-and-exact-url-pattern-for-opening-the-candid-ui-for-the-backend-canister-to-call-resetbootstrap-and-then-setmeasadmin-including-the-recommended-a4gq6-candid-ui-url-with-id-backend-canister-id-and-guidance-to-obtain-the-canister-id-from-the-diagnostics-page",
      "title": "Docs: Update frontend/PRODUCTION_CONFIGURATION.md to include explicit steps and exact URL pattern for opening the Candid UI for the backend canister to call `resetBootstrap()` and then `setMeAsAdmin()` (including the recommended a4gq6... Candid UI URL with `?id=<BACKEND_CANISTER_ID>` and guidance to obtain the canister id from the Diagnostics page).",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-deployment-redeploy-backend-frontend-changes-and-ensure-the-live-environment-reflects-the-update",
      "title": "Deployment: Redeploy backend + frontend changes and ensure the live environment reflects the update.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Add temporary public resetBootstrap() method to set firstAdminBootstrapped := false for initial admin bootstrapping recovery (to be removed/commented out after use).",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Add temporary /admin buttons (when access denied): 'Reset Bootstrap' calling resetBootstrap() and 'Set Me as Admin' calling setMeAsAdmin() to complete first-admin setup.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Backend: Add a temporary public shared method resetBootstrap() in backend/main.mo that sets firstAdminBootstrapped := false, placed immediately after `var firstAdminBootstrapped : Bool = false;` and before `setMeAsAdmin()`.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Add temporary resetBootstrap admin recovery path (Candid + /admin buttons)",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}