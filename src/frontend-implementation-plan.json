{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Restore contact form phone field with country calling code dropdown",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Add a Phone field to the landing page contact form composed of a country calling code dropdown (label format like \"+1 US\") and a phone number text input, and ensure both values are submitted.",
      "acceptanceCriteria": [
        "The contact form shows a new Phone field consisting of a country calling code dropdown and a phone number input in `frontend/src/components/landing/ContactForm.tsx`.",
        "The country dropdown labels include the calling code and a short country abbreviation (example: \"+1 US\"), and do not display full country names (example: \"United States\").",
        "The user can select a country calling code and then type a phone number into the phone input without the form preventing entry.",
        "Any user-facing labels/placeholders/validation messages added for the phone field are in English.",
        "The form submission payload includes the selected calling code and the entered phone number (see REQ-3/REQ-4)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/landing/ContactForm.tsx",
          "operation": "modify",
          "description": "Extend the contact form UI and local state to include (1) a country calling code <select> driven by the exported list from `frontend/src/content/countryCallingCodes.ts` and (2) a phone number <input type=\"tel\">. Render dropdown option labels strictly as \"<callingCode> <countryAbbrev>\" (e.g., \"+1 US\"), and ensure the selected calling code + entered phone number are passed into `useSubmitContactForm` during submit. Keep any added labels/placeholders/validation messages in English."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Implement a typed, exported list of country calling code options for the contact form dropdown.",
      "acceptanceCriteria": [
        "`frontend/src/content/countryCallingCodes.ts` exports a non-empty list of calling-code options.",
        "Each option contains a calling code and a country abbreviation suitable for rendering labels like \"+44 UK\" / \"+1 US\".",
        "The contact form country code dropdown is driven by this exported list (not hardcoded inline)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/content/countryCallingCodes.ts",
          "operation": "modify",
          "description": "Add a typed export for the country calling code dropdown (e.g., an exported `CountryCallingCodeOption` type plus an exported non-empty `countryCallingCodes` array). Each option must include at minimum: `callingCode` (e.g., \"+1\"), `countryAbbrev` (e.g., \"US\"), and a stable `value` suitable for dropdown selection."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Extend the contact form submission hook to accept and submit phone calling code and phone number fields.",
      "acceptanceCriteria": [
        "`useSubmitContactForm` accepts phone-related fields in its `ContactFormData` type.",
        "The mutation calls the backend `submitContactForm` with the phone-related fields included (matching the updated backend method signature from REQ-4).",
        "TypeScript compilation succeeds without using `any` for the new phone fields."
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useSubmitContactForm.ts",
          "operation": "modify",
          "description": "Update the `ContactFormData` type to include `phoneCountryCallingCode` and `phoneNumber`, and update the mutation to call `actor.submitContactForm` using the correct argument order per `frontend/src/backend.d.ts` (name, email, phoneCountry, phoneNumber, message, honeypot, elapsedTime, recaptcha token). Ensure TypeScript types remain strict without `any` for the new fields."
        }
      ]
    },
    {
      "id": "REQ-6",
      "summary": "Update production smoke-test documentation to include verification of the new phone field behavior and successful submission.",
      "acceptanceCriteria": [
        "`frontend/SMOKE_TEST_PRODUCTION.md` includes steps and expected results for the phone field, including that dropdown labels appear like \"+1 US\" and that the form can be submitted with phone data included."
      ],
      "file_operations": [
        {
          "path": "frontend/SMOKE_TEST_PRODUCTION.md",
          "operation": "modify",
          "description": "Add smoke-test steps and expected results under the contact form section to verify: (1) the Phone field exists, (2) country dropdown labels use the \"+<code> <abbrev>\" format (e.g., \"+1 US\"), (3) selecting a code allows typing a phone number, and (4) the form can be submitted successfully with phone data included."
        }
      ]
    }
  ]
}